c state machine like concepte
