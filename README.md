c state machine like concept
